This a FtpServer for Linux.

直接执行./build.sh就可以进行编译。

使用前，先配置config.lua的文件根目录（即是FTP服务器所显示的根目录）

由于涉及到文件传输，所以需要多个文件描述符的打开关闭，所以采用的是多进程的方式。

FTP传输总共依赖两个进程，一个叫数据连接，一个叫控制连接。

控制连接：
主要是用于FTP命令的交互，FTP命令码的解析和回复。
比如登录、退出等操作。


数据连接：
主要是用于传输文件流和目录结构等。
主要存在两种传输方式：

1.PORT主动方式:
客户端把IP、端口发给服务器，服务器主动构建三次握手连接；
2.PASV被动方式：
服务器把IP、端口发给客户端，自身构建TCP服务器监听，由客户端主动发起TCP连接。


在本例中，两个进程的通信主要依赖socket。通过sockpair生成一对socket，然后用fork生成两个进程，把生成的socket分别交给父子进程管理，信息的传输处理依靠双方的状态机来维护。


